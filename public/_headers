# Cloudflare Pages 头部配置
# 注意：所有模式匹配行必须以冒号结尾

# 全局安全头
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=()

# 静态资源缓存策略
*.js:
  Cache-Control: public, max-age=31536000, immutable

*.css:
  Cache-Control: public, max-age=31536000, immutable

*.png:
  Cache-Control: public, max-age=31536000, immutable

*.jpg:
  Cache-Control: public, max-age=31536000, immutable

*.svg:
  Cache-Control: public, max-age=31536000, immutable

*.ico:
  Cache-Control: public, max-age=31536000, immutable

# 字体文件缓存
*.woff:
  Cache-Control: public, max-age=31536000, immutable

*.woff2:
  Cache-Control: public, max-age=31536000, immutable

# HTML 文件缓存策略
*.html:
  Cache-Control: public, max-age=3600

# 静态内容文件缓存策略
public-notes.json:
  Cache-Control: public, max-age=300

all-notes.json:
  Cache-Control: public, max-age=300

build-info.json:
  Cache-Control: public, max-age=300

# API 路由缓存策略
/api/*:
  Cache-Control: public, max-age=60

# 管理页面不缓存
/admin/*:
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0

# 静态内容文件
/public-notes.json
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, OPTIONS
  Access-Control-Allow-Headers: Content-Type, Cache-Control, Pragma
  Cache-Control: public, max-age=300, s-maxage=600
  Content-Type: application/json

/all-notes.json
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, OPTIONS
  Access-Control-Allow-Headers: Content-Type, Cache-Control, Pragma
  Cache-Control: public, max-age=300, s-maxage=600
  Content-Type: application/json

/build-info.json
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, OPTIONS
  Access-Control-Allow-Headers: Content-Type, Cache-Control, Pragma
  Cache-Control: public, max-age=300, s-maxage=600
  Content-Type: application/json

# 主应用文件
/*.js
  Cache-Control: public, max-age=31536000, immutable

/*.css
  Cache-Control: public, max-age=31536000, immutable

/*.html
  Cache-Control: public, max-age=0, must-revalidate

# 图标和静态资源
/*.svg
  Cache-Control: public, max-age=31536000, immutable

/*.ico
  Cache-Control: public, max-age=31536000, immutable

# 预检请求处理
/*
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
  Access-Control-Allow-Headers: Content-Type, Authorization, Cache-Control, Pragma
